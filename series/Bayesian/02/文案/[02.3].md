# 贝叶斯公式和世界观(3):贝叶斯派 vs 频率派/贝叶斯世界观
## p1
Hello各位同学大家好，我是Fmajor。我们来继续讲解贝叶斯体系。
本期视频 将对比频率派和贝叶斯派的不同观点，并为大家揭开贝叶斯体系的核心世界观。
直接空降到此视频的同学 请 先观看 前面三期视频，传送门在这里。

我们正式开始吧。
## p2
第一个话题，我们想讨论一下频率学派和贝叶斯学派的异同。
## p3
首先我们从历史发展的角度来看一下。
频率学派，初期思想可以追溯到19世纪，而在20世纪初 得到了系统化的发展。
这一时期的代表性人物，如Fisher和尼曼等，
他们推崇 基于重复实验来获取参数的固定值，并基于此 进行统计推断，形成了频率学派的理论体系。
在二十世纪中叶左右，安德烈·柯尔莫哥洛夫 完成了 概率论公理化体系。
为频率学派提供了坚实的数学基础，使得频率学派的统计方法 得以在更广泛的领域得到应用。
而在现代，频率学派的方法 在许多领域得到了广泛应用。而且，他的理论框架和方法 至今仍然是 统计学教育的重要组成部分
说白了，我们大部分同学，开始学习概率论的时候，首次接触到的 大概率都是频率学派的这套体系。

而贝叶斯学派的发展，就更加的曲折一些。
贝叶斯学派的起源 可以追溯到18世纪的托马斯·贝叶斯和皮埃尔-西蒙·拉普拉斯。
他们通过 结合先验知识和观测数据 来更新对未知参数的信念，为贝叶斯学派的独特理念奠定了基础。
然后，在20世纪中叶，贝叶斯方法受到了一些忽视，主要的原因是频率学派的主导地位和计算困难。
而到了现代，随着计算机技术的进步，特别是蒙特卡洛马尔可夫链（MCMC）方法的出现，贝叶斯方法得到了广泛的应用和推广。
所以我们可以称之为现代复兴。特别是他在 数据分析、机器学习等领域 显示出的强大的应用能力。
而在此基础上，贝叶斯网络和因果推断理论得以发展起来，使贝叶斯学派在现代统计学、数据科学和人工智能领域中的影响不断扩大。
通过这些发展，贝叶斯学派为处理复杂系统的不确定性和因果推断提供了重要的理论和方法。

所以在现代，特别是在 机器学习和人工智能 蓬勃发展的此时，贝叶斯理论 是非常值得我们花时间 去认真学习的。
## p4
然后我们再来简单看一下 频率学派 与贝叶斯学派 所基于的 数学与公理基础

（点）先看频率学派，前苏联数学家 柯尔莫哥洛夫 于1933年提出了概率论的公理化体系。
他的完整描述大概是这样子的。柯氏公理只是界定了概率所必须满足的一般性质，
而频率学派 对于概率的本身定义分为两种，一种是古典概率，实验中有N个等可能结果，事件E包含其中M个结果，则概率P(E)=M/N
另外一种是统计定义，独立重复试验中 发生的频率趋于极限p，这个p就是概率。
这些就是频率学派的公理基础，还有他的概率的定义。

（点）然后贝叶斯学派的公理和概率定义，就是我们第一部视频的内容。
基于的公理是左边的，然后推导出来的定理是右边的。
贝叶斯体系 所基于的数学基础，主要体现在 数值化和符号化的过程中。
我们使用了布尔代数，而它是依赖于集合论的。所以贝叶斯体系下，我们还是用到了许多集合论相关的内容。
但是，我们并没有直接基于，柯尔莫哥洛夫公理化体系，这点和频率学派有所区别的。
然后关于概率的定义，
概率一个实数，代表人类对事件的感觉/或者说认知、知识、信念等。他经过了定标和归一化，不同人之间可以相互比较
这一页的内容太数学了，特别是左边部分，看的有点让人头大，那我就赶紧切到下一章了，有兴趣的同学 暂停下来再仔细看吧。
## p5
大部分学习贝叶斯理论的同学 都应该是非数学科班出身的。
比起刚才的那些严密的公理体系，我们更在意的其实是，如何正确的使用 这些统计学工具。

这一页表格中所列出来的内容，我认为才是，这两个学派最核心，最关键的不同。
我们一项一项的说。
第一行，数学根基，这是上一页的内容。两者都依赖集合论的知识，然后频率学派以 柯尔莫哥洛夫 公理化体系为基础，而贝叶斯学派并没有直接使用这套公理化体系。
然后是，非常重要的，这两个学派 尝试描述、建模的内容。
频率学派是对事件本身进行建模，而贝叶斯学派 则是对 人类对事件的认知/知识/信念 进行建模，怎么理解两者的区别呢？
频率学派的看法是，事件本身是随机的/世界带有某种随机性，所谓概率 是事件本身的性质。这是一种站在上帝视角审视事件的方法。随着 独立重复实验的进行，人们对事件概率值的估计会越来越准确，但是概率值是不变的。
而贝叶斯学派的看法是，人类对世界的认知是不完备的，所谓概率 描述了 人类对事件的感觉/认知/知识/信念，即观察者对事件的知识状态。随着人获取更多信息，概率值本身会不断更新和改变
这些差别，是频率学派和贝叶斯学派，最核心、最本质、最重要的差别。我这里暂停10秒钟，大家再仔细看一下、体会一下。(暂停10秒)
然后我们再看，概率的定义。这也是上一页ppt的内容。不过，在你了解了世界观简述这一行的内容之后，你再看这两个定义，应该会有更好的理解。

最后，对于理工科的学生来说，我们使用统计学工具，最常做的一个事情就是，参数估计。
而频率学派和贝叶斯学派，在这一点上，也有很大，而且非常重要的不同。
## p6
频率学派认为，我们要估计的参数，是有一个固定的真值的，而数据 是随机和变动的
频率学派对于参数，会给出一个点估计，也就是一个数值。同时他也会构造一个置信区间 来描述参数估计的靠谱程度。
这个置信区间 是与你点估计的值所绑定的，随着他移动。
你可以想象，在无数平行世界中，我获得了无数组数据。每一组数据计算出的点估计值 都略有差异。
然后 以每个点估计值为中心，左右给一个宽度，画一个置信区间。
根据定义，所有这些平行世界中 数据产生的置信区间，有95%，会套住真值。
在这里，变动的是数据，变动来源于在平行世界中采样。而参数的真值永远不变。
这是一套表述起来相当拗口的方法，来衡量点估计的准确性。
那么如果这个时候有学生提问，
(学生声线)：老师，我们现在得到了点估计值和置信区间，那么我们的真值是不是有95%的概率落在这个区间里呢?
老师就会摇一摇头，（老师声线）不能那么说，我只能保证，在无数个平行世界中进行实验，计算他们的点估计和置信区间，这些置信区间有95%的概率套住真值。
(学生声线)：做了实验之后，我们不是已经得到一个区间了么？真值是不是有95%的概率 落在这个区间里呢？
(老师声线)不可以这么说，只能说在很多次实验后，他们计算出来的置信区间套住参数真值的概率是95%，真值不变区间变
(老师声线)啊，同学你冷静一点
保持微笑

那我们再来看一下，贝叶斯学派是怎么处理参数估计问题的。
我们会认为，既然已经得到了 这样一组数据，那他们就是固定的，也会给我们提供一些信息。
所以，这里变化的 是我们对参数的认知。
使用贝叶斯公式之后，我们得到的是一个后验分布，是一个函数，来描述我们对于参数取值的认知。
所以说，在贝叶斯世界中。我们对于万事万物的认知，都是一个个分布函数，这个稍后我们会举例说明。
我们输入的是一个先验分布函数，输出的是一个后验分布函数。
当然，要输出一个函数会比较麻烦，需要画出完整的函数图像。
总不能我想称个体重，体重称就必须自带打印机，给我打印一个体重后验分布的图吧，那也太麻烦了

于是，我们可以使用 类似于 频率学派的那种表述方法。比如，以概率密度最大值/均值或中值的那一点的参数取值，作为估计值输出，同时给出一个所谓的可信区间，使得 带估计的参数 落在这个可信区间的概率是，比如95%。这就是刚才那位同学想要得到的，关于参数估计准确性的保证。
我们这里数据是定的，可信区间也是定的。唯一变动的是我们要估计的这个量的取值，是我们对他的认知。

这部分内容，我建议同学门反复观看和反复理解，直到 弄清楚他们的差别为止。

最后简单概括一下就是，频率派的参数估计结果是一个数值，加上一个解释起来非常拗口的置信区间。
而贝叶斯派的参数估计结果，原始形态是一个后验分布函数，简化形态 也可以是数值正负上下限，给出一个可信区间。
然后对于可信区间，我们可以放心的说，参数落在此区间的概率为95%。

这就是我想给大家展示的，频率学派和贝叶斯学派，关键的不同之处。
## p7
OK, 我们继续从另外的视角 比较频率学派和贝叶斯学派，他们对于不同类型事件的概率解释。
这其实就是对上一页表格中的 概率定义那一行，进行进一步的举例解释。
首先 我们来看所谓的 古典概率事件。这是概率论中 最简单的 计算正向概率的问题。
这是因为 我们完全知晓事件的模型，概率是一个确定值。
我们看，经典问题包括，抛均匀硬币，掷均匀色子，抽坛子中的全同球。
那么根据频率派，我们使用古典概率的定义，实验中有N个等可能结果，事件E包含其中M个结果，则概率P(E)=M/N。可以很容易计算得到 不同事件或者事件组合的概率。就是一个比值。
那么 同样来看贝叶斯派 对于这个问题的处理。我们可以直接使用最后一条定理，
对于互斥完备事件集合〖{A〗_1,A_2,⋯,A_n}, 如果我们的先验知识中 没有关于他们的任何信息，则每个事件的概率都是n分之一
我们对于所有单个的事件，都没有任何的额外信息，我们没有理由去偏爱 或者偏信任何事件。那么他们的概率都是n分之一
这条定理也可以叫，Principle of indifference，无差别原理，而且他也体现了我们之后会提到的最大熵原理。
这个定理和古典概率的定义几乎是等价的。因为他告诉你，对于除了符号之外无差别的事件，每一个概率都是N分之一，然后同样的，你定义的事件包含几个独立子事件，那你就是n分支几，古典概率 这里也同样是N分之M。
所以两个学派，对于古典概率事件的 概率值计算，是完全一样的。
## p8
然后我们来看第二种类型的事件，他们是容易做实验统计频率的事件，例如抛未知硬币，掷未知色子，抽坛子中的不全同球。
这里其实就是参数估计问题了，要估计的参数是概率值。有的时候也会被人称之为逆概率问题。
接下来，我们就来深入探讨一下这个，最经典的，抛硬币问题。
这个问题的输出结果，可能比你想象的要更加丰富一些。

首先我们定义两个事件符号，一个是事件大X, 他的描述为硬 币正面朝上。那么p(大X)就是硬币正面朝上的概率。
另外一个事件符号，记作大X=小x，他的描述为，硬币正面朝上的概率为小x，那么p(大X=小x)，我们简记为p(小x)，就是 硬币正面朝上概率值的 概率密度分布函数。
所以p(X)和p(x)是完全不一样的东西，前者是一个数，后者是一个概率密度函数。（点）

首先看频率派：概率是频率，需要做长期大量的实验，使得结果的频率趋于一个固定的值，其为概率
然后频率派一口气扔了n次硬币，其中k次朝上。
这个时候 频率派就可以给出结果了。p(大X)=k/n，这是一个数值，代表对 硬币正面朝上概率的估计值。
但是仅仅给出一个数值，我们并不清楚，这个估计量的 靠谱程度。
那么频率派 就需要打一些补丁，做一些额外的工作。
他们需要为问题找到 或构造 合适的概率分布函数，然后在点估计的基础上，构造一个所谓的置信区间。
比如我们这里，这是一个二值问题，服从二项分布。而且，当n足够大的时候，二项分布接近于正态分布。
那么在95%置信水平下，置信区间的宽度就可以用这个公式来表示。
这个置信区间的含义是什么呢？来，我们再来说一遍车轱辘话吧。
是，如果我们重复进行多轮实验，每轮都扔n次，并且每轮都计算概率值和置信区间。那么，这么多轮实验中得到的置信区间，其中会有95%套住真值。
哎呀，说完了。总之，真值不变区间变。频率派的给出的结果，就是一个点估计值，一个数值，再加上一个 以点估计值为中心的，置信区间。

然后我们来看，贝叶斯派。（点）
概率是我对事件结果的认知和信念。我一开始有先验知识，不必做实验就可以给出概率的先验分布，当然 我还可以做 任意次数的实验，来更新我的概率值。
那么 我们首先来看，先验知识是什么？
先验知识就是，一无所知。我只知道有一枚硬币，有两个面，不清楚他的大小、材质、生产商等，也不知道是扔在桌子上还是沙发上、床上。反正 扔出来的结果 只有正面和反面两个选项。这个时候 我想要估计一下硬币正面朝上的概率，小x。
那么我人为的，x的先验分布应该是什么呢？
根据无差别原理，或者最大熵原理，我的先验分布就是p(x)=1，是一个归一化的 常数函数。
然后贝叶斯派 接下来要做什么呢?当然是 带入贝叶斯公式啦~
来我们看需要带入些什么，先验分布我们已经有了，这个归一化因子就是个数，最后可以使用积分 或者数值的方法来进行求解，可以先不用在意他
最重要的就是这里的 似然了。
我们把，两种不同数据的，似然函数 都写出来。
那么，根据贝叶斯公式,每次投掷得到一个正，后验分布多乘一个x，反之则乘一个1-x，
我们对硬币正面朝上的认知，就是这样，跟随一个一个的数据，发生改变。
只看公式的话还是有点抽象。我们把一个一个获取数据的过程，做成了一个视频
## p9
首先，这是我们的先验分布，是一个归一化常函数。我使用中值加上对称区间的做法，给出这么一个可信区间。
好，你现在问我，正面朝上的概率505，你觉得怎么样？
我说，嗯，可以接受，毕竟他落在我们95%的可信区间里。
然后你又问，正面朝上的概率为10%，你觉得怎么样？
我说，嗯，可以接受，毕竟他落在我们95%的可信区间里。
然后你还问，正面朝上的概率为90%，你觉得怎么样？
我说，嗯，可以接受，毕竟他落在我们95%的可信区间里。

这就是我们现在的先验知识，几乎可以说，咋样都行，这是因为我们还没有数据。

（点）然后，现在开始抛硬币。现在拿到了第一个结果，正面朝上。
现在的后验分布用蓝色来表示，似然函数，用绿色虚线来表示，然后关于可信区间的选取，我调整了算法，使用概率密度最大的参数值，正负一个区间。
得到了这样一个，有点奇怪的可信区间表示。
现在你问我，正面朝上的概率为20%，你觉得怎么样？
我说，不太对，他已经落在我们95%的可信区间外面了。

（点）然后我们继续投硬，你们也投个币呗。
（点点）哇，连续四次正面，是硬币有问题么?
先不说这个，我们首先发现，随着数据量的增加，可信区间，是越来越小的。
（点）然后，哇，终于有一个反面了。我们的绿色似然函数，总算也变成1-x了。
这个时候，后验分布的形状总算看起来正常一些了，然后我们得到的可信区间的，是以概率密度最大值为中心，然后一条扫描线往下取，与概率分布曲线相较于两个点，直到这个区间内的概率 积分值达到0.95为止。
## p10
（点） 我们继续这个过程，稍微快进一下。绿色的是似然比函数，我应该已经加入归一化因子的影响了。
然后，我们不断积累数据，我们对命题大X=小x的后验分布逐渐靠近了0.6，这个我做模拟所设定的，理论值。而且可信区间也越来越小。
（等待动画播放）（点）
## p11
直到最后，我们完成了1000次实验，我们得到的结果，就是这样一个后验分布函数。
我们的95%可信区间，是0.549~0.610。
这个时候你又问我，正面朝上的概率为60%，你觉得怎么样？
我说，嗯，不错，可以接受，毕竟这个值落在我们95%的可信区间里
然后你再问，正面朝上的概率为50%，你觉得怎么样？
我说，不太对，这个值不在我们95%的可信区间里

对于贝叶斯学派 给出的参数估计结果。其实更重要的是这个可信区间，而不是那个概率最大值。
在这个区间里的任何参数取值，我们觉得都是合理的。
对于这个问题，后验分布非常的对称，而且是个单峰的分布，所以用最大值和正负区间 来表示没有什么争议。
（点）
但是如果 我的分布是个歪的，或者是多峰的。就比如这样，虚线是99%的可信区间，那么你中间值是取这个最大值位置么，但是这个第二高的跟他也没差多少，还是取均值，中值？这个，可以凭你的喜好任意选取，你要你明确告诉大家就行了。我们更在意的，还是这个这个可信区间。
在可信区间中，随意取一个值，来当做我对这个参数目前的认知，我觉得都是没问题的。

这就是可信区间，是贝叶斯参数估计结果给出的输出中，我们最需要关注。（点）
好，这就是硬币实验的最后结果了。
再总结一下，我们原始的结果是，后验分布函数。对此函数，你可以对输出进行一些化简。
最省事儿的，就只给概率密度最大值所对应的参数值 ，说正面朝上的概率是58%。
然后，信息丰富一些的，说95%可信区间，是54.9%~61.0%
信息再丰富一点的，就是说95%可信区间，是0.58+0.03-0.031
或者就直接给出这个后验分布图，这才是最完整的信息。
## p12
我们已经看到了一个 使用贝叶斯思想 对二值问题的概率分布 进行认知和评估的完整流程，也看到了我们的输出结果，是一个后验概率密度函数。
那么我们就可以 隆重的 介绍，贝叶斯世界观：我们对万事万物的认知，都是一个个的概率分布。
万事万物皆分布
## p13
我们举一些例子来说明。
比如对这个抛硬币的二值问题。
一开始，我们只知道硬币有两个面，这个时候，我想让你描述一下，你对他正面朝上这件事情的认知。
很多同学这个时候就会脱口而出，它正面朝上的概率就是0.5嘛，因为我啥也不知道么。
不过，再仔细想一下，这个说法又不太对，我又不知道他是不是一个老千的硬币，本来就不均匀呢？ 
是的，这个时候你对这个硬币的先验认知，其实是概率密度等于一。
当我们做了1000次试验后，你的后验分布变成了这样，这个时候你的认知是，其正面朝上的概率有95%的可能，在0.58正负0.03左右。
这才是贝叶斯主义者对世界认知方式。（点）

对于二值问题，我们的认知是 其概率值的概率密度分布。
如果是其他的量，比如现实生活中的 物理量，那么我们的认知 就是这个值本身的概率密度分布。
对于很多可以直接进行测量的物理量来说，我们一般使用这种表达方式。数值+-误差。
很多物理专业的同学，也许，又会回想起 当年大学中，做普物实验的 那段时光了。
这个误差，其实就是在 假设后验分布，为正态分布的情况下，一个sigma, 或者说68%可信区间的半宽。
因为我们已经假设了他是高斯分布，所以这种表述其实是提供了 完整的 后验分布信息的。

对于其他更复杂的后验分布，特别是非对称的。一般是科学论文给出的。会使用数值+上误差-下误差，这种形式。
其中数值选取，可以比较自由，比如中值、均值、最大值概率密度值等。我们关注的，还是这个可信区间。在区间中随意取一个值作为参数，我们认为都是靠谱的。

说到科学论文。我随便给大家拿出来一篇看一下，看看科学家们，经过研究，给我们带来的 所谓的科学结论，都是长什么样子的
## p14
我们看这篇文章  
Advanced LIGO，这是一个引力波天文观测仪器，它在首次观测运行中， 探测到的双黑洞并和事件
（点）首先是文中的一张表格，告诉我们，这次发现了三个 双黑洞并和事件。

那么我们对这些事件的认知，都有哪些呢？
文章中的大部分的信息，都浓缩在了这个表格中。比如说，对于GW150914这个事件，
我们认为，双黑洞中大黑洞的质量是36.2+5.2-3.8个太阳质量，小黑洞的质量为29.1+3.7-4.4个太阳质量。这两个区间都是90%可信区间。
每个参数背后 都是一个后验分布函数。因为模型参数是在太多了，这么多后验分布函数图像 都画出来塞到文章中，文章就太长了，塞不下的，也没有必要，所以，使用包含可信区间数据的表格，来展示所有这些数据的后验分布信息。

这个科学研究 给我们带来了什么样的科学认知呢?就是这些可信区间，还有他们的后验分布。

（点），当然，对于一些重要的参数，还是值得把他们的后验分布给画出来的。
比如右下角这个，是这三个事件距地球的距离 后验分布图。其中这两个离地球较近，68%可信区间大约就300~500Mpc吧
然后，对于这个事件，我们的观测精度有限，对他的认知就比较弥散，68%可信区间也许都600~1300Mpc了，我们不能很好的把握他的距离。
所以你看，这就是我们直接分析 后验分布函数，所给我们带来的信息。
其他三个图，其实也都是后验分布，是某两个参数的二维联合后验分布。其中的小圈，是50%可信区间，而大圈是90%可信区间。

（点）最后这张图，是关于这几个源，位置的后验分布。
左边是他们在天球上的位置，其实就是描述，他们在哪个星座方向的，后验分布信息。
而右边，则是这些源 在被探测到的时候，他们相对于地球表面位置的，后验分布信息。

然后文中还有更多的表格，和更多的图，你猜一猜 他们都展现了什么样的信息给我们？
对，一些参数的后验分布信息，恭喜你都会抢答了。
但事实的确是这样的。
科学家给我们带来的，基于观测数据的，对于这些黑洞并和事件的认知，就是这样一个个的后验分布信息。
## p15
其实，许多实验/观测/调查类型的科学论文，
他们整篇论文 只干了一件事情，那就是带入贝叶斯公式，得到后验分布。
在引言部分，他们会提供与这个实验/观测相关的 先验信息
然后在实验设计/模型介绍/数据来源等章节，提供关于假设H，数据D和似然函数p(D|H)的定义
分析的时候，带入贝叶斯公式，或者使用蒙特卡洛马尔科夫链方法，画出后验分布图，得到一维和二维的可信区间。
最终，会使用文字，表格，和各种图片，像我们展示，后验分布的结果。
就比如，只给出后验概率密度最大值的参数取值，一个数值，但是对于科学论文来说，如果你连结果的 可信区间都不给出，是过不了审的。
所以，最起码要展示可信区间，对于重要的参数，要给出一维的后验概率分布，甚至还可以给出更详细的二维联合密度分布。
如果你给出了所有参数的一维和二维联合分布，那么你就画出了一张corner图。（点）
类似这样。图中是根据Plank望远镜的数据，来对标准宇宙学模型 进行拟合之后，得到的各个参数的一维和二维的后验分布。
所以你现在问我，我们人类对于宇宙，最新的认知是什么。
我会告诉你，基于标准宇宙学模型和plank数据，我们对于其中各个参数的后验分布信息的认知，就是这张图。
或者更简单来说，天文学家们 对宇宙目前的认知，就是这张图。

所以，这就是使用贝叶斯体系的人们，看待这个世界的方式。也是我们的信仰：万事万物皆分布。

好，我故意停顿了几秒钟，来让大家感受一下这种震撼，特别是对于初次听到这种说法的同学们。
我个人在天文领域学习工作了有十几年了，主要在做观测和数据处理的工作。从我第一个本科项目，一直到博后出站的工作，没有一个是不使用贝叶斯公式的。
除了在科学工作中，严谨的的使用贝叶斯工具之外，我也经常把这种视角，或者说信仰，用在日常生活中。
（点）我的B站头像和个性签名，大约有10年没有变化过了。我的知识一直在更新，但感觉是这些底层的特性，真的是一直没有变啊。
所以，在拖更了十年之后，我依然存在一种发自内心，想要向大家分享和表达贝叶斯世界观的这样一种愿望，在我说出这句话的时候，想必
我已经实现了，也传达到给大家了。

哇，刚才的那段话，实在是非常适合 作为一个视频的结尾。不过我想了想，下面的内容和之前还是有比较强的逻辑关联呢。
我就不为了保留氛围而单独切一个视频了。
进度条还有一半儿呢，我们继续后面的话题吧。
## p16
## p17
刚刚，我们已经阐述了 贝叶斯的世界观，但是其内容 好像与我们之前所讲的东西有一些矛盾。
我们现在回到上个视频所讲的内容，基于灵敏度和特异性的二值事件概率更新模型。
我们不是说万事万物皆分布么？而且刚刚对于抛硬币事件，我们的确，给出了硬币正面朝上的概率密度分布，而不仅仅是，硬币正面朝上的概率。
但是在二值事件概率更新模型中，我们讨论的所有东西，都是概率值，比如，患病的先验概率，啊是个概率。灵敏度，是个条件概率，特异性，也是一个条件概率。
所以我们的概率分布在哪里呢？

这个时候，我们就只能先狡辩一下了。概率值，其实意味着一个二值的离散概率密度分布，也算是概率密度分布。（点）
如果这个说法 你不太能够接受的话，我们换一个离散量多一点的 概率密度分布。抽到扑克牌的 概率密度分布。啊54张牌，我们给出每一张牌被抽到的概率，这其实就是一个离散值的概率密度分布。
然后，我们在再看一个老千的色子，他的各个面朝上的概率密度分布，啊，是这样的，一共6个面，其中6朝上的概率最大，也是一个 离散概率密度分布。
然后再换成我们的，是否患病，两个离散值的概率密度分布。所以也是一个分布。你觉得的如何？

嗯，文字游戏被你玩明白了，但是，还不是我想要的。
就像投硬币问题，最后 我不仅仅得到了正面朝上的概率值，还得到了关于这个概率值的靠谱程度的信息。
那我们检测疾病这个例子，最后能不能得到 患病概率的 概率密度分布呢？
## p18
当然是可以的。但是 需要我们 再来捋一下这个事情。

首先，我们来思考一下，以下相同的数值 是否给你提供了相同的信息？
本市疾控中心 给出某病目前发病率: 基于100个人的数据，50%患病率/本省疾控中心给出某病目前发病率: 基于1000个人的数据，50%患病率
这两个50%,后者给人的感觉，明显是更靠谱的。
某两款 新冠抗原检测试剂盒 给出了各自的灵敏度，分别为基于100个和1000个样本的统计，都是99%.
同样，这两个99%，我们也是觉得，后者更靠谱。

在前面的模型中，我们强调了（点），模型5要素。其中我们输入的是三个概率值。
你输入的信息，本身就是不详细的，是简化的信息，所以输出出来的东西，也只能是概率，也是简化的信息。

所以，二值事件的概率描述，其实是一种简化的信念:p(A为真)，简记为p(大A)，完备信息由事件发生概率值的 概率密度分布来描述:p(A为真的概率是x)，简记为p(x)来表示

如果想要拿到后验概率值 的概率密度分布，那你输入的这三个量 至少有一个 得是概率密度分布，然后输出才可能是概率密度分布。（点）

那我们就一次满足三个愿望，输入三个概率密度分布，不过在此之前，得看一下这三个的概率密度分布怎么拿到。
这个问题其实就是 抛硬币问题了。我们说，先验发病率是疾控中心给出的，从n个抽样样本有k个病例得出的。这里的抽样样本不能仅仅是那些 主动去医院检查的人，因为他们有可能已经有患病症候，所以只统计这批人，发病率肯定是偏高的。正确的方法是随机人群抽查，但是这样成本也许有点高。
真实情况下估计这个值也许很复杂，我们这里简化一下，就是不计成本的随机人群抽样。
对于这种 硬币正面朝上 概率密度分布问题，我们是有理论的分布曲线的，就是，Beta分布。
同样的，灵敏度和特异性的值，也是厂家 通过临床试验，k个阳，n个患病和k个阴，n个不患病，这样得到的，同样的，满足两个beta分布。

好我们现在三个分布在手，这是我们目前的知识、信息和认知。

然后我们带入贝叶斯公式，每测一次阳和每测一次阴。后验概率和先验，灵敏度、特异性的关系。我们把这三个量简记为xyz。
现在xyz是三个分布，所以我们的结果是三个随机变量这么组合和运算，所形成的新的随机变量的，的概率密度分布。

这个应该怎么计算呢？其实他是有理论解。我们来复习一下概率论中的一些知识。（点）已知两个随机变量的概率密度函数，我们是可以求他们 和，积与商的理论概率密度函数的。
算是可以算，但是每一步，都要引入一层积分。我们来看，这里有三个乘法，一个加法和一个除法。所以是五层积分。我们的结果是包含五层积分的积分函数。（点）
真要对这个五重积分函数 进行计算，画出他的函数图像，我的笔记本甚至手头的几台服务器，内存占用直接原地爆炸。做不了的。
所以，这个时候就要采用数值方法了，上 蒙特卡洛模拟，简称MC。
对于xyz，进行模拟采样，采样完之后，直接计算后验概率数值，最后我们就得到了，一大堆的后验概率值，再用数值方法，统计他的概率密度分布即可。
做这件事情的python程序，以及前面一些表格、图和视频的生成程序。我都会打包放在评论区。
里面的随机数种子 都给你设定好了，你完全可以重复跑出来和我ppt中完全一样的结果。

那么我们来看结果。
## p19
首先 需要知道我们设定的参数。
这里先验，设为0.5, 灵敏度百分之90，特异性百分之75。
这个参数下，阳性结果带来的证据量增量是5.563分贝，阴性结果带来的证据量增量为负的8.751分贝
然后这是分别测一次阳和测一次阴之后我们的后验概率和后验证据量数值。
接下来，我们要把MC跑出来的结果和表格中的数值，进行比对。
首先看左边的图。黑色实线 是我们的先验分布，是参数值为50,50的beta分布。正好对应了50%先验概率值。
然后是两个黑色虚线，分别是灵敏度和特异性的Beta的分布，参数是90/10和75/25。然后左边对称的位置是一减去灵敏度和一减去特异性的分布。你可以认为是第二类和第一类错误的概率密度分布。
然后两个蓝色的图像分别是测一次阴和测一次阳的后验分布。
右边的图和左边是一样的，只不过我把概率变成了证据量，这么做的好处在后面我们会看到。
然后我们来对比图中的结果和表格中的结果。
图中，我们先验分布的概率密度最大值是概率0.5，同时我们也画出了95%可信区间。
可以看到，100人的样本还是有点小了，我们的概率都快弥散到0.4和0.6了。
同样的，可以看到灵敏度的可信区间大约在0.85到0.95之间，特异性的可信区间在0.7到0.82之间。这个弥散还是有点大的，这就是概率密度分布图给我们提供的关于这些概率值靠谱程度的信息。

然后我们来看一下后验分布的结果，两个蓝色实线，阴性结果 概率密度最大值是0.117， 阳性结果0.783。看一下表格，几乎一模一样。
这就是我们想要的，患病的，后验概率密度分布。可以看到，弥散还是挺大的。
这是因为我们的先验信息，还有灵敏度和特异性，都是基于小样本结果给出的，我们获得的信息，不是很充分，结果自然有一定弥散。
## p20
然后我们就可以尝试，改变一下，先验、灵敏度和特异性的分布。
哎，我们不改变他们的最佳值，只改变他们的，可信区间大小。
灵敏度从90/100,变为900/1000, 特异性从75/100变为750/1000。
我们看到，新的后验分布，最佳值几乎不变，可信区间却变窄了。
也就是说，得到的结果更为靠谱了。这里括号中的数值是可信区间的宽度，大家可以直观的看到，他们的变化。
## p21
然后这次，我仅仅改变先验分布。从50/100到500/1000，可以看到，同样的，我们后验分布的可信区间变窄了，我们对结果的准确性，更有把握了。
## p22
我再展示 两组 不同参数条件下的结果。
第一个，我把灵敏度调为99%, 然后同样使用100和1000个样本的结果。
这个时候，灵敏度和阴性后验结果，都太贴近y轴了，概率密度分布图已经不太好看了。
此时如果我用证据量，来代替概率，关于分布的细节，就能看的更清楚了。
而且对于概率值来说，上面的这个可信区间的宽度，其意义并不明朗。
我们上期视频 在讲发生比和证据量的时候 已经举过例子，10%的概率差别，在不同位置，的证据量差别 是不一样的。
而这个证据量可信区间宽度，对应了概率区间，最大最小概率值的发生比的对数。是一个更加合适的，用来描述概率/或者说信念弥散 的数据。
在我们使用了更大的样本之后，关于证据量的置信区间宽度，会大幅下降。我们的结论和信念就更集中、更靠谱了。
## p23
然后最后一个例子，我把灵敏度和特异性换一下，关于图中的细节，有兴趣的同学，暂停下来自己观看吧。

如果你想解决自己的问题，生成类似的图像，可以使用评论区中我给的程序，自己改一改参数，跑一跑就出来了。
## p24
好，这就是我想给大家分享的，二值事件概率更新模型的概率密度描述

果然啊，还是 万事万物皆分布。
只不过有的时候我们想偷一下懒。才使用这种简化的概率描述。
但如果你想严肃，认真的整理，你对一些事物的认知和信念。
到最后，其实还是会得到类似这样的，概率密度分布。
## p25
关于贝叶斯世界观，我们已经讲的非常深入了。但是频率派和贝叶斯派的pk，还没有完。
之前所举的列子，还都是那些容易做实验的事件。特别是二值事件。
在这些事件上，实验还是可以做的，频率派的观念尚且可以一战。

但接下来的事件类型，用频率派观念解释起来，就有点棘手了。（点）
比如，明天台风登陆的概率，频率派只能擦一擦汗，说，概率是频率，我可以用超级计算机在赛博平行世界中做模拟，观察和统计明天台风登陆的次数，除以总模拟次数，得到概率。
而贝叶斯派，说 概率是我对台风会登陆的信念。我有历史同时期观测数据，对其概率有个先验预期。然后可以再结合这几天的气象数据，更新我的信念，甚至，我现在抬头看一下天，都可以给我带来新的信息，来更新我对 台风明天是否会登陆的信念

然后我们进入最后的pk（点）
明天 相亲成功的概率

这个时候，频率派 就已经语无伦次，那么…在，无限个平行宇宙中，你 去 相 亲，或者在galgame模拟中，你反复读档，啊blablabla
而贝叶斯派说，概率是我对明天相亲成功的信念，嗯，前几天，我们微信聊的不错，也许会有后续的发展

好pk到此结束。频率派认为，概率是事件频率，是一个固定值。而贝叶斯派认为，概率是对事件的认知，知识和信念，会随着数据的积累而更新。
我们就是这样，不断地获得更多信息，从而更加深入的理解这个世界。
## p26
以上就是，本期视频的内容。
频率派 vs 贝叶斯派，以及我们贝叶斯主义世界观:万事万物皆分布
下期视频中，我们将使用另外一个全新的视角，来更加深入的理解概率论和贝叶斯理论。

我们下期视频再见。