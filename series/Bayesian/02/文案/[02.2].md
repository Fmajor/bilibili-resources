# 贝叶斯公式和世界观(2): 贝叶斯公式的经典使用案例
## p1
承接上期视频的内容。我们来看一些贝叶斯公式的经典使用案例。
直接空降到此视频的同学 请 先看 前面两期视频，传送门在这里。
然后我们正式开始吧。 
## p2
首先是经典款，疾病检测。
这个问题，网络上有无数的视频 在进行讲解，有的视频看了之后感觉好像懂了，哎，又好像没懂。我们看一下能不能 一次性把他给讲清楚。

疾病检测，就是一个二值事件 概率更新的问题。我们的假设，只有两个取值，患病或者不患病。我们的数据，也只有两个取值，阴性 或者是阳性。
这其实也是一个 二元假设检验问题，但假设检验是一类更加复杂的问题，我们会在 多元假设检验的专题视频中 展开讲解。

在这里，我们其实只关注一个事情就可以了。就是拿到新数据之后，我的患病的后验概率或证据量，是怎么变的。
要计算后验概率，就要用先验概率乘以似然比，然后先验概率其实也存在于似然比的表达式中。如果有多个独立数据，我们就要进行迭代计算。
而要计算后验证据量，就要简单的多，只需要使用先验证据量 加上 数据对假设的贝叶斯因子的log，就可以了。
对于二值假设二值数据的这个问题来说，贝叶斯因子就是一个常数，由灵敏度和特异性直接计算得出。
这两行已经列出来了，每测一次阳或阴。我的概率应该怎么更新，还有我的证据量应该怎么更新。

（点）好我们就以三个例子，来做进一步的说明
某同学进行了一次检测，结果为阳，吓得他又连测三次，得到阳阳阴的结果，这是他大脑中(患病)信念发生的变化（点）
首先我们给定第一组参数。先验概率由疾控中心给出，为10%，看来是个流行病。
对于流行病来说，我们希望尽可能的减少漏诊，于是检测的灵敏度很高，为99%, 而特异性，现在只能达到75%。
我们的先验概率是10%，那么先验证据量，以分贝为单位，就是-9.5。然后大家看这个上下标，
这个是什么意思呢，其实就是每测一次阳，和每测一次阴，我证据量的改变，其实就是10倍log10的这两个贝叶斯因子。
然后第一次测得阳的时候，我们的后验概率从0.1变为0.3，证据量的改变，其实就是加了一个6分贝，从-9.5变为了-3.5。这两个值就是一次阳结果后，我们对患病概率的认知。
后面三列同理，计算概率的时候，我们要迭代计算，而计算证据量的时候我们只需要加上或者减去一个数就可以了。
比如，拿到阳阳阳的结果之后，我们的证据量 相对于初始证据量 就增加了不到 三六一十八， 大约18分贝左右。
但是得到一个阴性结果之后，我们的证据量 直接减少了18.7分贝。到最后，直接被初始的证据量还要低。
我们说这位同学，压惊成功。因为一个阴性的结果，就直接抵消了三个阳性结果所带来的证据量增量。
为什么会这样呢？那是因为我们的特异性，相对较低，于是比较容易犯第一类错误，出现误诊。而犯第二类错误，出现漏诊的概率就要小得多。
而阳性结果，就有可能是误诊造成的。所以三个阳性结果，作为证据来使用，都抵不过一个阴性结果。
而且我们注意到，这个证据量的改变量，其实是和先验证据量无关的。（点）就比如这里第二个表格，如果我让先验信念变为百分之1。然后同样是三阳一阴的结果。
那么我们的证据量改变量，其实是和第一个例子一模一样的，也是先增加了18分贝，再减少18.75分贝。同样的，压惊成功

（点）最后，我们再调整一下参数，稍微提高一下特异性。特异性的提高会导致 阳性结果和阴性结果 的证据量改变量的 绝对值增大，但是阳性结果改变了更多
现在两个阳性结果就已经能够压倒一个阴性结果，造成证据量的增加了。而三阳一阴，总共造成了大约19分贝的证据量增量。这位同学压惊失败
但是，却不用惊，因为考虑一下先验证据，我们现在关于患病的证据量，依然是-10分贝。换成概率也就8%。这就是我们目前根据已知信息所得到的，关于患病的信念。
## p3
那么，应该如何更好的理解，阳性结果不一定意味着患病这件事情呢？

我再来稍微总结一下。
我们要意识到，检测结果给我们提供的是仅仅是 证据量或者说信念的改变量
而最终的证据量，是等于 先验证据加上证据量的改变量
如果初始的先验证据量很低，那么，尽管阳性结果给我们带来了患病证据量的增量，最终的证据量 也许并不会很高，证据不足
这就是所谓的
低发病率疾病筛查所出现的阳性结果，不需要造成我们的恐慌，这件事情的一个直观解释。（点）

当然，我们总会是 关心自身健康的，所以发现疾病症候是，额外多做一些检测，也是没有什么问题的。
对于疾病检测这件事情，一般我们认为是二值问题，
在经过很多的检查和诊断之后，啊，每个检查和诊断方法都有其自身的 灵敏度和特异性，你的证据量如此这般，加加减减，
最终，如果你真的是患病了，你的证据量会变得很大，反之，你的证据量会变得很小。
这个时候，初始的那个先验证据 其实已经影响不大了。因为你的证据量已经被其他的数据或者说证据所主导了。

所以这又顺便，嗯，解决了另外一个问题，就是很多人 所谓诟病的 贝叶斯体系对先验知识的依赖：你依赖了主观先验值，那就意味着不客观甚至不科学。
但这不是个问题，就我们这个疾病检测的引申例子，最终你的证据量会被许多的数据和证据所主导，而最开始的先验概率，几乎不会影响 最终结果 的准确性，
只是会在证据还不足的情况下，造成不同人之间也许比较大的信念差异。一但数据上去了，证据量的绝对值就会很大，结果就会完全依赖于主导的那些证据了。

ok, 疾病检测问题所基于的 二值事件概率更新模型 是 贝叶斯体系学习中 最基础，最经典的 一个认知模型。
也是在学习初期 会给我们造成一点点困惑的问题。
在我们熟悉这个模型之后，牢记这两句话。我们就可以尝试把他应用到日常生活中更多的场景中去了。
## p4
但其实，我们在日常生活中，已经非常广泛的在使用了这个模型了。
因为，贝叶斯体系本来就是符合你的直觉的，你在下意识中，其实就已经完成了相关的计算，只是你本人并没有意识到而已。
我们会更习惯使用语言 来解释我们的判断和选择， 不过接下来，我们用更加量化的方法   来分析一下我们的判断。
## p5
我们这就给出一个稍微通用一点的模型，也是我们时时刻刻、不知不觉的 都在使用的模型。
假设H，定义为事件H为真
而数据D，定义为我从某个信息源得知，H为真
两个事件定了，那么灵敏度和特异性的定义也就有了，他们的取值应该是多少呢？
这个时候，我们就又要强调 先验知识的重要性了，所以要把所有的C，显式的给写出来。
灵敏度是什么呢？事件为真，信息源声称其为真 的概率。这个概率值是多少呢？那就只能取决于你对这个信源的认知，根据你的常识，给出的数值。
特异性就是，事件为假，信息源 声称其为假的的概率，同样的，需要根据你自身先验知识给出。
所以对于同样一组事件HD, 不同人对他们的灵敏度和特异性认知，也许是相近的，但也有可能相差很大。

我们就简单举两个例子。（点）
第一个例子其实就还是疾病检测问题，不过我们这次换成了抗原。
使用这个模型，你需要明确这5个要素，然后带入数值，进行计算。

对于抗原检测问题，H假设就是你感染了新冠，而D就是，检测结果阳性，也就是试剂盒告诉你，你身体中有病毒核酸
然后你的先验知识是，这个试剂盒是符合国家标准的医疗器械，我应该相信他说明书上的给出的参数。
然后说明书上给出了灵敏度和特异性数值，我就采用这两个数了。
最后打开电视，或者打开朋友圈，估算一下现在新冠的发病率，然后就可以使用抗原检测结果更新你得病的证据量了。
这个例子中，大家对灵敏度和特异性的认知，几乎都是一样的，因为我们只能参考说明书 

（点）而下面这个例子，就是一个非常有趣的结果了
他展现了，四个人，对于同一份声明，有着不同的反应的原因
这里我们令数据D为，网红X先生发布声明说某个食品不安全
而我们的假设H为，这个食品不安全

注意这里的D和H 都是否命题的形式，所以其实我们最后的概率和证据量越小，食品越安全，数值越高，食品越不安全。大家不要看错了。
首先我们再次强调先验知识的重要性，你看这里所有的概率，灵敏度啊，特异性啊，都是基于这些人的先验知识，givenC的条件下的。
那我们来看一看这些数据都是怎么来的吧。
首先是前三个人的灵敏度，就是说他们认为 食品不安全的时候，网红X先生会声明它不安全
对于这一点，张三李四王五，还是相信X先生的，觉得他这点良心还是有的，不坑人。所以都给给了99.9%的灵敏度
而赵六同学，则认为X先生是一个彻底的混蛋，他会昧着良心推荐不安全的食品，于是灵敏度就只给了10%。
而特异性的取值 就更加多样一点，他的含义是食品安全的情况下，X先声称它安全的概率，我们来采访一下同学们，看他们怎么说。
(憨憨声线)张三同学:  X先生是一个公正的人。食品安全的时候，他会给出安全声明。我给99%的特异性。
(正常声线)李四同学:  X先生与其他厂家有利益关系，有可能故意抹黑这个厂家的食品，我给，嗯，30%的特异性。
(呼吁声线)王五同学：X先生是一个混蛋，他收了其他公司的钱，不遗余力的再黑这个公司的食品。特异性，我给1%。
(不良声线)赵六同学：X是一个大傻逼，大黑子，他妈的没良心，去他妈灵敏度和特异性。
这位赵六同学冷静一下…
我们来看一下X先生发布声明后，各位同学的证据量改变量吧
(憨憨声线)张三同学，从认为安全到认为不安全的解释：原来我非常相信这个食品的安全性的，但是听了X先生的话以后，我再也不会吃这种食品了！
(正常声线)李四同学，保持 不安全判断 的解释:我本来就不太相信这个食品，虽然X先生不值得完全的信赖，但是他这么说的确让我更为确信我的判断了。
(呼吁声线)王五同学，保持 安全判断 的解释：X先生是一个混蛋，他收了其他公司的钱，不遗余力的再黑这个公司的食品。他声称不安全几乎就不影响我对这款食品的判断。
(不良声线)赵六同学，从认为不安全到认为安全，这个傻逼说他不安全，那我反而觉得他更安全了,哼↘

所以，我们看到，对于同一个信息源给出的信息，由于不同的人对于其灵敏度和特异性的认知差别，导致了截然不同的信念流向，甚至 四种转变的结果 我们都凑齐了。
这种先后态度的转变或者不变，我们使用语言就可以完全解释清楚。
但是，在这种定性的逻辑推理过程中，我们其实是 偷偷地使用了 基于灵敏度和特异性的二值概率更新模型，在潜意识中做了定量的计算的
所以，这套模型 我们其实一直都在使用，只不过是 我们没有意识到而已。
应该是这样的吧？大家之后自己慢慢的体会一下吧。
## p6
刚才的例子，强调了 不同的人，绑定的是不同的先验知识。
而同一个人的先验知识，也是随着时间在不停演化的。
与之伴随的 就是我们对一些信源，灵敏度和特异性 认知的改变。（点）
就比如，多媒体信息。
随着技术进步，这些信息的灵敏度得到很大提升，也就是说 各种各样的事情，都更加容易 被录音录像设备所记录。
分辨率越来越高，视频越来越清晰，视频制作也越来越方便。所以说，一个事情如果发生了，特别是有趣的事情，那么他一定会被拍下来，灵敏度接近于1.
但是，同样的，随着技术发展，我们伪造音视频的能力 也越来越强。
比如最早期的照片，如果你想伪造的话，就要学习一些物理和化学知识，在生产照片的某个环节 做一些手脚，最终修改照片内容，还是有一点学习门槛的。
然后就是信息时代，大部分的音视频、图片等都被数字花了，然后PS，photoshop，从一个名词变为动词，再加上美图秀秀等滤镜模板，我们就再也不能说，有图有真相了。
然后现在是AI时代，我们不仅能够修改 已经存在的音视频，甚至能够凭空创造 足以以假乱真的 音视频图像等。
在这个时代，多媒体信源的特异性，无限逼近与0，因为有太多造假的手段了。
这是多媒体信源 灵敏度和特异性随时间的演化。

然后再来讨论一下，我们作为一个生物，最重要的信源（点）
比如我们的眼睛和其他感官。这些都是我们自己的零件，按理说灵敏度和特异性应该都很高，甚至可以达到1吧？
但很可惜，也都达不到
就比如，各种心理和生理现象，都会造成一些认知偏差，使得眼见为实 也不一定成立
而且，按照科幻小说《三体》的时间线，现在为危机纪元，智子已经到达，他是否已经开始干扰我们的视网膜了呢？有这种可能吧？
然后再想一想，现实世界真的是现实的么？我们是在地球online游戏中的NPC么。
再比如若干年后，我们实现了机械飞升，可以对身体进行义体改造，就像赛博朋克2077游戏中那样。
那我换装了一个苹果牌的 高清全波段美瞳ieye max pro plus义眼，这个机械眼睛有可能会被黑客入侵，那么他的灵敏度和特异性又会是多少呢？
我们最信赖的这些感官，在未来世界，他们的灵敏度和特异性也会出现 和现在多媒体内容 相似的演变么？

这些，我也不知道。我们的先验知识，也只能随着时代发展，一点一点更新，也许未来就是这个样子的。
好。讲到这里，也许大家已经开始逐渐熟悉这个 基于灵敏度和特异性的 二值事件概率更新模型了。
只要搞清楚了这个5个要素，之前我们进行的、感性的、似是而非的、完全凭语言描述和直觉的那种推理过程，就可以用稍微数学一点的方法来进行了。
这有的时候可以帮助我们去理清楚思路，对于需要 严肃思考的问题，给出一个 更加清晰的判断过程。

（点）这里，我想给大家留一个小作业。
请 自行举出 几个信源的例子，并在给定假设 H的条件下，评估他们的灵敏度和特异性。
把你下意识中经常做的事情，给拿到台面上来。很多事情，都会变得更加清晰。
## p7
通过前面的理论推导和数值实例，我们知道，高灵敏度和高特异性的检测手段 是我们所希望拥有的。
所以，有没有什么有效的手段 来增加灵敏度和特异性呢？
的确是有的，而且非常的简单粗暴。（点）
首先，我们写出几个等式和不等式，留给下面使用。
左边p(AB)，这里的乘法是and运算，代表AB同时发生，小于等于p(A)，同时，小于等于p(B)。若AB独立，则p(AB)等于p(A)乘以p(B)
右边,p(A+B), 这里的加号是or运算,代表A或者B发生。然后他大于等于p(A),大于等于p(B),如果AB独立，那么有后面这个式子。

（点）好，我们首先想要提高灵敏度，或者说减少漏诊。
这个很容易做到，我们只需对多个数据 进行 或运算就可以了。由上面的不等式可知，灵敏度增加了。
但是，同学们，代价是什么呢？
我们把特异性写出来，根据上面不等式，发现它降低了。
降低的有多快呢？如果数据独立，他可是 连乘式的降低。
这就是提高灵敏度 最简单粗暴的方法，使用多个数据的或运算，作为新的检测手段。
他会提高灵敏度，却也会 大大的降低特异性。
这种方法论，在日常生活中 有没有被人使用过呢？
那可太多了。（点）
就比如，在传染病防控初期，为了减少漏诊，及时控制住疫情传播，我们必须使用高灵敏度政策。
各种作为检测 可能患病的手段，满足其一，就必须及时隔离。
但是 这种方法会 大大降低特异性，大部分被隔离的人 都是虚惊一场。
我们犯第一类错误，出现误诊的后果，并不太严重。而犯第二类错误，出现漏诊的后果，就要严重的多。
所以，就会使用这种方法论，实现高灵敏度。
另外的俗语，例如，以防万一/宁可错杀，绝不放过等等，都是这种，通过牺牲特异性，从而获得更高灵敏度的方法论。

（点）而对于提高特异性的方法，相信大家可以直接猜到了。
我们左边使用的是or运算，那右边就是用and运算了。
具体推导大家自己看吧，我们的结论和左边是对称的。
使用and运算 组合数据 作为新的数据，可以增加特异性，减少误诊，却会大幅度 减小灵敏度，增加漏诊
如果数据独立，灵敏度 会以连乘的方法减低。
具体实例，还拿传染病防治举例
我们在 确诊疾病的时候，需要使用高特异性政策
在疫情前期，核酸检测方法 无法大规模应用的时候。我们就只能 组合一些其他检测手段，例如 必须出现多种临床症状，同时要求 肺部CT 支持感染的结论 才能确诊，来尽可能的提高特异性。
顺便一提，一般某种疾病筛查方法都是: 高灵敏度初筛，高特异性确诊。这样省时省力。
然后回到追求高特异性的其他的列子，包括法庭判决，要求证据链必须完善，才能够对犯罪嫌疑人定罪。这里也是使用的与的逻辑。
还有就是一些层层加码现象，既要又要还要。也是为了要提高特异性。
所以，这也是一种非常实用的方法论。

看来灵敏度和特异性，二者似乎无法兼得？
有没有办法同时增加这两个值呢？（点）

想要实现这个目标，那么我们就只能从底层原理和因果关系入手了，来发现和创造全新的 高灵敏度、高特异性检测手段。
其实我们的核酸和抗原检测手段，就是按照这个思路来的。具体的分析，我们在讲因果推断的章节中再说吧。
## p8
关于灵敏度和特异性，我们最后，再举一些列子。

我们第一款，经典款，就是疾病检测。
然后我们来看百搭款。抛硬币和一切。（点）

up主在写这段ppt时候，外边天气是阴的，突然，手机收到了 暴雨预警短信，我脑中，马上定义了 假设H 为 马上下雨，然后P(H|𝐶)=0.999（点）
但是，我突然 拿出了一个硬币，并且定义，数据D 为硬币正面朝上的概率。稍后我们会看到，此时的P(H|DC)，也等于99.9%。
哇！震惊！硬币朝上对于检测下雨的灵敏度为99.9%!
给大家10秒钟时间体会一下，看看有没有被惊到。
（点）好的，我刚才的话应该是没有问题的，因为我们知道，数据D和假设H，是独立的事件，写出来之后就是这个关系。所以p(H|DC)就等于此时的p(H|C)，都是99.9%，灵敏度99.9%是没有问题的。
但是，我们同时也要注意到，特异性此时等于这个，等于0.1%。
灵敏度加特异性，等于1 。根据之前的结论，两个方向的贝叶斯因子都是1，检测不提供任何信息。这才对嘛
但是，这个灵敏度99.9%是什么情况？这个数字好像会给人一种，检测手段很靠谱的感觉啊。

是的，在我们不了解 基于灵敏度和特异性的 二值事件概率更新模型之前，的确 模模糊糊的 会有这样一种的感觉。（点）
但是，我们已经仔细的学习过这个模型了。我们应该清楚 灵敏度和特异性，其中一个很高，并没有太大的意义，必须两者加起来接近2，检测 才能提供有效的信息。

而很多封建迷信、诈骗者、各种半仙，都会尝试伪造他们的高灵敏度，来试图让别人相信他。
比如各种预言家，常年在论坛上发帖，预言成功就宣传，预言失败就删帖，伪造出来 高灵敏度
因为这些实施者，本身知道事件是高概率事件，却声称 是自己的行为/或者给定自己的条件 造成了事件的高概率发生

这就会忽悠到不少人了

但是如果我们仔细观察，他们的行为/给定的条件 特异性很低：事件的发生不都是都伴随着他们的行为/条件而产生的
所以，对于所谓 高灵敏度的事情，我们可以尝试问一句，你的 特异性如何，大多数情况 就可以实现掀桌子的效果。

你说 张大仙儿，你没有做法，却还是下雨了，怎么解释呢？
你没有预言的重要事件发生了，明明这个事件比你预言的其他事件重要的多，你为什么不给出这件事情的预言，而是关注那些无聊的小事情呢？
你能不能给出足够多的重要事情不发生的预言呢?
你的特异性是多少。
灵敏度+特异性，这 才是我们需要关注的。

然后 再留一个小作业，请举出一些高特异性，低灵敏度的例子。在评论区作答。

最后我们再看一个新潮款的例子。使用的是 之前的那个统一模型。（点）
其实，这个就是那四个人中 赵六的例子，我们称之为塔西佗陷阱。
当一个人的公信力彻底丧失，我们就会有一种，无论事情是真是假，你都不会说实话！你个骗子！这种感觉。
数学上就体现在灵敏度接近于零，特异性也接近与零。
这个时候，就会出现非常有意思的情况。
他 越是声称 一件事情是真的，你反而 更加不相信这件事情。
那么 这个例子中，数据D提供了信息么?
那可太提供了，虽然是相反的信息，但也是有效的信息，甚至有可能是非常有用的信息。
具体例子，就不方便列举了，当做第三个小作业，大家脑补一下就可以了。
这个问题的平替款问题，我能想到的大概就这些，大家自己看一下吧
## p9
好啦~
以上就是贝叶斯公式应用的，经典款、百搭款和新潮款例子。
他们都是 基于灵敏度和特异性的二值事件概率更新模型 的具体实例。
在之后的视频中，我们关于这个模型额讨论还将继续。

那么，我们下个视频不见不散。